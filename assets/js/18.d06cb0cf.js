(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{366:function(t,s,r){t.exports=r.p+"assets/img/6.0.1.6651242e.jpg"},367:function(t,s,r){t.exports=r.p+"assets/img/6.0.2.bfe9f658.jpg"},463:function(t,s,r){"use strict";r.r(s);var a=r(42),o=Object(a.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"創建"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#創建"}},[t._v("#")]),t._v(" 創建")]),t._v(" "),a("p",[t._v("本章的重構手法涵蓋與建立物件相關的問題：")]),t._v(" "),a("ul",[a("li",[t._v("建構式（constructor）的寫法")]),t._v(" "),a("li",[t._v("過度複雜的建構邏輯（construction logic）")]),t._v(" "),a("li",[t._v("非必要的 "),a("strong",[t._v("Singleton")]),t._v(" [DP]")])]),t._v(" "),a("h2",{attrs:{id:"創建函式-creation-method"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#創建函式-creation-method"}},[t._v("#")]),t._v(" 創建函式（Creation Method）")]),t._v(" "),a("p",[t._v("建立並返回物件實體的 static 或 non-static 函式。")]),t._v(" "),a("p",[t._v("和 "),a("strong",[t._v("Factory Method")]),t._v(" [DP] 不一樣，"),a("strong",[t._v("Factory Method")]),t._v(" 不可以是 static，且必須被兩個 class 實作 -- 通常一個是 superclass 另一個是 subclass。")]),t._v(" "),a("h2",{attrs:{id:"factory"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#factory"}},[t._v("#")]),t._v(" Factory")]),t._v(" "),a("p",[t._v("在業界，"),a("strong",[t._v("Factory")]),t._v(" 定義不明確，可能是指 "),a("strong",[t._v("Factory Method")]),t._v(" 或是 "),a("strong",[t._v("Abstract Factory")]),t._v("。作者的定義：「實作一個或多個 Creation Method(s)」的 classes。")]),t._v(" "),a("p",[a("img",{attrs:{src:r(366),alt:""}})]),t._v(" "),a("p",[t._v("如果建立物件的資料和程式碼蔓延在多個 classes，就會產生 "),a("em",[t._v("解法蔓生")]),t._v("（Solution Sprawl）的壞味道。需要使用 "),a("em",[t._v("Move Creation Knowledge to Factory")]),t._v(" 把創建碼和資料集中在一個 "),a("strong",[t._v("Factory")]),t._v("。")]),t._v(" "),a("p",[a("em",[t._v("Encapsulate Classes with Factory")]),t._v(" 最常見的兩個動機是：")]),t._v(" "),a("ul",[a("li",[t._v("確保客戶經由共同介面對 classes 的實體進行溝通")]),t._v(" "),a("li",[t._v("讓 classes 的實體可以經由 "),a("strong",[t._v("Factory")]),t._v(" 被存取，降低客戶窺見 classes 細節的機會")])]),t._v(" "),a("h3",{attrs:{id:"factory-method"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#factory-method"}},[t._v("#")]),t._v(" Factory Method")]),t._v(" "),a("p",[a("strong",[t._v("Factory Method")]),t._v(" 是個 non-static 函式，回傳 base class 或是 interface，而且在繼承體系中被實作，讓它可以進行多型創建（參考："),a("RouterLink",{attrs:{to:"/ch6/introduce-polymorphic-creation-with-factory-method.html"}},[t._v("Introduce Polymorphic Creation with Factory Method")]),t._v("）。")],1),t._v(" "),a("p",[a("strong",[t._v("Factory Method")]),t._v(" 必須由某個 class 和其一或多個 subclasses 定義與實作。這些 classes 都是 Factories，但我們不會說 "),a("strong",[t._v("Factory Method")]),t._v(" 是個 "),a("strong",[t._v("Factory")]),t._v("。")]),t._v(" "),a("h3",{attrs:{id:"abstract-factory"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#abstract-factory"}},[t._v("#")]),t._v(" Abstract Factory")]),t._v(" "),a("p",[a("strong",[t._v("Abstract Factory")]),t._v(" 是個 interface，被設計來 "),a("strong",[t._v("可在執行期進行替換")]),t._v("，這樣系統可以讓用戶設定組態。")]),t._v(" "),a("p",[t._v("每個 "),a("strong",[t._v("Abstract Factory")]),t._v(" 都是 "),a("strong",[t._v("Factory")]),t._v("，但 "),a("strong",[t._v("Factory")]),t._v(" 並不都是 "),a("strong",[t._v("Abstract Factory")]),t._v("。當需求升級到必須支援「繼承族系的相依物件」的創建任務時，應該進化為 "),a("strong",[t._v("Abstract Factory")]),t._v("。")]),t._v(" "),a("p",[a("strong",[t._v("Factory Method")]),t._v("、"),a("strong",[t._v("Factory")]),t._v(" 和 "),a("strong",[t._v("Abstract Factory")]),t._v(" 的結構差異如下圖：")]),t._v(" "),a("p",[a("img",{attrs:{src:r(367),alt:""}})]),t._v(" "),a("h2",{attrs:{id:"builder"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#builder"}},[t._v("#")]),t._v(" Builder")]),t._v(" "),a("p",[a("strong",[t._v("Builder")]),t._v(" [DP] 是簡化物件結構的建構式最好的作法。")]),t._v(" "),a("p",[a("em",[t._v("Encapsulate Composite with Builder")]),t._v(" 示範如何以更簡單、不容易出錯的方式建立 "),a("strong",[t._v("Composite")]),t._v(" [DP]。")]),t._v(" "),a("h2",{attrs:{id:"singleton"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#singleton"}},[t._v("#")]),t._v(" Singleton")]),t._v(" "),a("p",[t._v("因為經常遇到太多沒用的 "),a("strong",[t._v("Singleton")]),t._v(" [DP]，本章最後一項重構 "),a("em",[t._v("Inline Singleton")]),t._v(" 用來教你如何移除 "),a("strong",[t._v("Singleton")]),t._v("。")])])}),[],!1,null,null,null);s.default=o.exports}}]);